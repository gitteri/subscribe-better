!function(o){var n={trigger:"atendpage",animation:"fade",delay:0,showOnce:true,autoClose:false,scrollableModal:false};o.fn.subscribeBetter=function(e){var i=o.extend({},n,e),t=o(this),l=false,c=false;t.addClass("sb");o.fn.openWindow=function(){var n=o(this);if(n.is(":hidden")&&l==false&&c==false){l=true;n.fancybox({autoScale:true,autoDimensions:true,centerOnScroll:i.scrollableModal}).trigger("click")}};o.fn.closeWindow=function(){o.fancybox.close()};o.fn.scrollDetection=function(n,e){var i,t=(new Date).getTime();o(window).scroll(function(){var n=(new Date).getTime();if(n-t>400){o(this).trigger("scrollStart");t=n}clearTimeout(i);i=setTimeout(function(){o(window).trigger("scrollEnd")},300)});if(n=="scrollStart"){o(window).bind("scrollStart",function(){o(window).unbind("scrollEnd");e()})}if(n=="scrollEnd"){o(window).bind("scrollEnd",function(){o(window).unbind("scrollStart");e()})}};switch(i.trigger){case"atendpage":o(window).scroll(function(){var n=o(window).scrollTop();if(n>=o(document).height()-o(window).height()){t.openWindow()}else{if(n+300<o(document).height()-o(window).height()){if(i.autoClose==true){t.closeWindow()}}}});break;case"onload":o(window).load(function(){t.openWindow();if(i.autoClose==true){t.scrollDetection("scrollStart",function(){t.closeWindow()})}});break;case"onidle":o(window).load(function(){t.scrollDetection("scrollEnd",function(){t.openWindow()});if(i.autoClose==true){t.scrollDetection("scrollStart",function(){t.closeWindow()})}});break}}}(window.jQuery);